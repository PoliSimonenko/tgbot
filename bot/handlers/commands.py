from telebot import types
from bot.keyboards import main_menu

def register_handlers(bot):
    @bot.message_handler(commands=['start', 'help', 'back'])
    def send_welcome(message):
        text = (
            "üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Telegram-–±–æ—Ç —Å—Ç–µ–∫–ª–æ–∑–∞–≤–æ–¥–∞ \"–ù–µ–º–∞–Ω\"!\n\n"
            "–ó–¥–µ—Å—å –≤—ã —Å–º–æ–∂–µ—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –¥–ª—è —Å–µ–±—è —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω—ã–π –º–∏—Ä —Å—Ç–µ–∫–ª–∞, –≤–¥–æ—Ö–Ω–æ–≤–∏—Ç—å—Å—è —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ–º –Ω–∞—à–∏—Ö –º–∞—Å—Ç–µ—Ä–æ–≤ –∏ –Ω–∞–π—Ç–∏ –∏–¥–µ–∞–ª—å–Ω–æ–µ –∏–∑–¥–µ–ª–∏–µ –¥–ª—è —Å–µ–±—è –∏–ª–∏ –≤ –ø–æ–¥–∞—Ä–æ–∫. –í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª –∏ –Ω–∞—á–Ω–∏—Ç–µ —Å–≤–æ—ë –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ:\n\n"
            "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∏–∂–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å:\n"
            "üé® –°–æ–∑–¥–∞—Ç—å –¥–∏–∑–∞–π–Ω - –†–∞–∑—Ä–∞–±–æ—Ç–∞–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ —Å—Ç–µ–∫–ª—è–Ω–Ω–æ–µ –∏–∑–¥–µ–ª–∏–µ –ø–æ –≤–∞—à–µ–º—É –≤–∫—É—Å—É: –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º—É, —Ü–≤–µ—Ç, –¥–µ–∫–æ—Ä –∏ –ø–æ–ª—É—á–∏—Ç–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –≤–∞—à–µ–≥–æ –±—É–¥—É—â–µ–≥–æ —à–µ–¥–µ–≤—Ä–∞!\n"
            "üß™ –¢–µ—Å—Ç - —É–∑–Ω–∞–π—Ç–µ, –ü—Ä–æ–π–¥–∏—Ç–µ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π —Ç–µ—Å—Ç –∏ —É–∑–Ω–∞–π—Ç–µ, –∫–∞–∫–æ–µ –∏–∑–¥–µ–ª–∏–µ –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ \"–ù–µ–º–∞–Ω\" –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –∏–º–µ–Ω–Ω–æ –≤–∞–º - –æ—Ç–∫—Ä–æ–π—Ç–µ —Å–≤–æ—é —Å—Ç–µ–∫–ª—è–Ω–Ω—É—é –ª–∏—á–Ω–æ—Å—Ç—å!\n"
            "üéÅ –ü–æ–¥–æ–±—Ä–∞—Ç—å –ø–æ–¥–∞—Ä–æ–∫ - –ü–æ–ª—É—á–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É –ø–æ–¥–∞—Ä–∫–∞ –¥–ª—è –ª—é–±–æ–≥–æ —Å–ª—É—á–∞—è –∏ –±–ª–∏–∑–∫–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ - –º—ã –ø–æ–º–æ–∂–µ–º –ø–æ–¥–æ–±—Ä–∞—Ç—å —Ç–æ, —á—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Ä–∞–¥—É–µ—Ç!\n"
            "üè≠ –ì–∏–¥ –ø–æ –∑–∞–≤–æ–¥—É - –û—Ç–ø—Ä–∞–≤—å—Ç–µ—Å—å –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —ç–∫—Å–∫—É—Ä—Å–∏—é –ø–æ –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–º—É —Å—Ç–µ–∫–ª–æ–∑–∞–≤–æ–¥—É ¬´–ù–µ–º–∞–Ω¬ª, —É–∑–Ω–∞–π—Ç–µ –æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ, –∏—Å—Ç–æ—Ä–∏–∏.\n"
            "üìû –ú–µ–Ω–µ–¥–∂–µ—Ä - –°–≤—è–∂–∏—Ç–µ—Å—å —Å–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏, –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –∏–ª–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ - –º—ã –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã –ø–æ–º–æ—á—å!\n\n"
            "‚ú® –ü–æ–≥—Ä—É–∑–∏—Ç–µ—Å—å –≤ –∞—Ç–º–æ—Å—Ñ–µ—Ä—É —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞, —Ç—Ä–∞–¥–∏—Ü–∏–π –∏ –∏–Ω–Ω–æ–≤–∞—Ü–∏–π –≤–º–µ—Å—Ç–µ —Å ¬´–ù–µ–º–∞–Ω–æ–º¬ª!"

        )
        bot.send_message(message.chat.id, text, reply_markup=main_menu())

    @bot.message_handler(func=lambda msg: msg.text == "–ù–∞–∑–∞–¥")
    def back_to_main(message):
        send_welcome(message)


def send_main_menu(chat_id, bot=None):
    """
    –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ä–∞–∑–¥–µ–ª–∞–º–∏ –±–æ—Ç–∞
    :param chat_id: ID —á–∞—Ç–∞ –∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –º–µ–Ω—é
    :param bot: —ç–∫–∑–µ–º–ø–ª—è—Ä TeleBot (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    """
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)

    buttons = [
        types.KeyboardButton("üé® –°–æ–∑–¥–∞—Ç—å –¥–∏–∑–∞–π–Ω"),
        types.KeyboardButton("üß™ –¢–µ—Å—Ç '–ö—Ç–æ —Ç—ã –∏–∑ –ø—Ä–æ–¥—É–∫—Ü–∏–∏?'"),
        types.KeyboardButton("üéÅ –ü–æ–¥–æ–±—Ä–∞—Ç—å –ø–æ–¥–∞—Ä–æ–∫"),
        types.KeyboardButton("üè≠ –ì–∏–¥ –ø–æ –∑–∞–≤–æ–¥—É"),
        types.KeyboardButton("üìû –°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º")
    ]

    markup.add(*buttons)

    menu_text = """
üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é!
–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–π –≤–∞—Å —Ä–∞–∑–¥–µ–ª:
"""

    if bot:
        bot.send_message(chat_id, menu_text, reply_markup=markup)
    else:
        return menu_text, markup